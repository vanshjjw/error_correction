from sage.all import *

F = GF(2)

# Step 2: Define the polynomial ring over GF(2) with variables x and y
R = PolynomialRing(F, ['x', 'y'])
x, y = R.gens()

# Step 3: Define the values for l and m
l = 3  # Example value for l
m = 4  # Example value for m

# Define the ideals generated by x^l - 1 and y^m - 1
I_x = R.ideal(x**l - 1)
I_y = R.ideal(y**m - 1)

# Step 4: Create the quotient ring
Q = R.quotient(I_x + I_y)

# Step 5: Define a polynomial in the original ring
p = x**2 + x*y + y + 1

# Step 6: Factorize the polynomial in the original ring
factors = p.factor()

# Print the polynomial and its factors in the original ring
print(f"Polynomial in original ring: {p}")
print(f"Factors in original ring: {factors}")

# Step 7: Map the factors into the quotient ring
Q_factors = [(Q(f), multiplicity) for f, multiplicity in factors]

# Print the factors in the quotient ring
print("Factors in quotient ring:")
for factor, multiplicity in Q_factors:
    print(f"Factor: {factor}, Multiplicity: {multiplicity}")